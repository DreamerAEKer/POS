/* Print Styles - Optimized for 57mm/58mm Thermal Printers */
@media print {
    @page {
        margin: 0;
        size: auto;
        /* Revert to auto */
    }

    /* Fixed Overlay Strategy - Most Robust for Mobile */
    /* Class-Based Hiding Strategy */
    body.is-printing>*:not(#receipt-print-area) {
        display: none !important;
    }

    body.is-printing {
        visibility: visible !important;
        margin: 0 !important;
        padding: 0 !important;
        background: white !important;
        height: auto !important;
    }

    /* Force show the receipt area */
    #receipt-print-area {
        display: none;
    }

    body.is-printing #receipt-print-area {
        display: block !important;
        position: absolute;
        /* Revert to Absolute */
        left: 0;
        top: 0;
        width: 100%;
        margin: 0;
        padding: 0 5mm;
        /* Restore padding */
        background: white;
        color: black;
        font-family: 'Sarabun', sans-serif;
        font-size: 16px;
        line-height: 1.3;
        font-weight: 600;

        /* Prevent Page Breaks inside components */
        .receipt-header,
        .receipt-item,
        .receipt-total,
        .receipt-qr,
        .receipt-footer {
            break-inside: avoid;
            page-break-inside: avoid;
        }

        /* Auto-Cut Padding at bottom */
        #receipt-print-area::after {
            content: ".";
            display: block;
            height: 25mm;
            /* Increased to 25mm for VOZY G80 Cutter */
            color: transparent;
            page-break-after: always;
            /* Hint to cut paper */
        }

        .receipt-logo {
            text-align: center;
            margin-bottom: 10px;
        }

        .receipt-logo img {
            max-width: 80%;
            height: auto;
            filter: grayscale(100%) contrast(150%);
            /* Optimize for thermal */
        }

        .receipt-qr {
            text-align: center;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .receipt-qr img {
            width: 160px;
            /* Increased from 120px */
            height: 160px;
            max-width: 80%;
            /* Ensure it fits on 58mm */
            object-fit: contain;
            /* Force sharp edges for QR */
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;

            /* High contrast to reduce thermal dithering artifacts */
            filter: contrast(200%) grayscale(100%);
        }

        #receipt-print-area * {
            visibility: visible;
            /* Ensure children are visible */
        }

        .receipt-header,
        .receipt-footer {
            text-align: center;
            margin-bottom: 12px;
        }

        .receipt-header h2 {
            font-size: 24px;
            /* Massive header */
            margin-bottom: 5px;
            font-weight: 900;
        }

        .receipt-divider {
            border-top: 2px dashed black;
            margin: 10px 0;
        }

        .receipt-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 6px;
            font-size: 18px;
            font-weight: 900;
            /* Extra Bold to match Header */
        }

        .receipt-total {
            display: flex;
            justify-content: space-between;
            font-weight: 900;
            font-size: 22px;
            /* Very large total */
            margin-top: 15px;
            border-top: 3px solid black;
            padding-top: 8px;
        }

        /* Hide URLs/dates that browsers sometimes add */
        a[href]:after {
            content: none !important;
        }
    }